{"version":3,"sources":["webpack:///./node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack:///./node_modules/querystring-es3/encode.js","webpack:///./src/services/wsClient.js","webpack:///./src/components/chat/chatContext.js","webpack:///./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack:///./node_modules/@babel/runtime/helpers/esm/inherits.js","webpack:///./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack:///./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","webpack:///./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack:///./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack:///./node_modules/d3-timer/src/timer.js","webpack:///./node_modules/d3-timer/src/timeout.js","webpack:///./node_modules/kapellmeister/es/utils.js","webpack:///./node_modules/kapellmeister/es/Events.js","webpack:///./node_modules/kapellmeister/es/BaseNode.js","webpack:///./node_modules/react-move/es/core/mergeKeys.js","webpack:///./node_modules/react-move/es/utils.js","webpack:///./node_modules/react-move/es/NodeGroup/index.js","webpack:///./node_modules/react-move/es/core/types.js","webpack:///./node_modules/d3-timer/src/interval.js","webpack:///./node_modules/react-move/es/Animate/index.js","webpack:///./node_modules/react-feather/dist/icons/arrow-left.js","webpack:///./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack:///./src/hooks/useAsyncTask.js","webpack:///./src/components/chat/accountModal.js","webpack:///(webpack)/buildin/module.js","webpack:///./src/components/modal.js","webpack:///./node_modules/querystring-es3/decode.js","webpack:///./node_modules/regenerator-runtime/runtime.js","webpack:///./node_modules/@babel/runtime/regenerator/index.js","webpack:///./src/components/section.js","webpack:///./node_modules/querystring-es3/index.js","webpack:///./src/services/httpClient.js","webpack:///./src/components/chat/userContext.js","webpack:///./src/components/table.js","webpack:///./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack:///./src/components/tabs.js"],"names":["_classCallCheck","instance","Constructor","TypeError","stringifyPrimitive","v","isFinite","module","exports","obj","sep","eq","name","undefined","map","objectKeys","k","ks","encodeURIComponent","isArray","join","Array","xs","Object","prototype","toString","call","f","res","i","length","push","keys","key","hasOwnProperty","WSClient","url","connector","this","ws","nextKey","listeners","Map","sendQueue","isConnecting","setConnector","connect","WebSocket","onmessage","ev","message","JSON","parse","data","forEach","listener","onopen","a","send","disconnect","close","addListener","set","removeListener","delete","messages","readyState","OPEN","m","stringify","sendSync","sendAndListen","options","listenForType","returnType","action","Promise","resolve","reject","lk","response","type","setTimeout","ChatContext","React","createContext","roomId","roomTitle","roomUsers","nickname","isLoading","isConnected","isFirstLogin","setFirstLogin","sendMessage","ChatProvider","children","getMessagesArgs","useContext","UserContext","token","user","useState","setRoomTitle","setNickname","setRoomUsers","setMessages","mergeMessages","useCallback","toAdd","ids","id","next","replaceIdx","get","wsClient","setWsClient","useAsyncTask","client","msg","title","useEffect","nextClient","wsUrl","run","current","startsWith","navigate","userId","state","mc","sender","Provider","value","loading","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_inherits","subClass","superClass","create","constructor","writable","configurable","_typeof","Symbol","iterator","_possibleConstructorReturn","self","assertThisInitialized","_getPrototypeOf","getPrototypeOf","_defineProperty","defineProperty","enumerable","taskHead","taskTail","timeout","interval","clockLast","clockNow","clockSkew","clock","performance","now","Date","setFrame","window","requestAnimationFrame","bind","clearNow","Timer","_call","_time","_next","timer","callback","delay","time","t","restart","wake","e","timerFlush","t0","t2","t1","Infinity","sleep","nap","poke","clearTimeout","clearInterval","setInterval","stop","elapsed","transitionId","extend","props","timingDefaults","duration","ease","Events","config","_this","start","interrupt","end","events","d","Error","func","called","_objectSpread","target","arguments","source","ownKeys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","_defineProperties","descriptor","BaseNode","protoProps","staticProps","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","done","item","err","return","transitionData","transitions","update","clone","timing","stateKey","_this$setState","prop","tweens","attr","val","getTween","setState","_objectSpread2","_ref","_objectSpread3","_ref2","_objectSpread4","_ref3","_this$setState2","_this$setState3","status","endValue","nameSpace","_this2","begValue","getInterpolator","_this2$setState","_objectSpread5","_ref4","transition","init","_this3","n","tid","tick","j","_","currNodeKeys","currKeyIndex","nextNodeKeys","nextKeyIndex","allKeys","_i","sort","b","nextOrderA","nextOrderB","currOrderA","currOrderB","_i2","pivot","_i3","_pivot","numeric","beg","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","_isNativeReflectConstruct","result","Super","NewTarget","apply","_Component","NodeGroup","_super","_this$state","nodeKeys","nodeHash","unmounting","pending","isTransitioning","nodes","interpolation","Node","_BaseNode","_super2","startInterval","prevProps","total","animate","_this$state2","stopTransitions","renderedChildren","Children","only","nextProps","prevState","keyAccessor","enter","leave","keyIndex","node","_k","mergedNodeKeys","_k2","_n","_d","propTypes","defaultProps","Animate","_this$props","show","createElement","_extends","assign","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","sourceSymbolKeys","propertyIsEnumerable","ArrowLeft","ref","_ref$color","color","_ref$size","size","rest","xmlns","width","height","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","x1","y1","x2","y2","points","displayName","asyncGeneratorStep","gen","_throw","arg","info","error","then","_asyncToGenerator","fn","args","asyncFn","setLoading","setError","RegisterForm","onCancel","onSuccess","allowGuest","createGuest","register","isGuest","setIsGuest","inputUsername","setInputUsername","password","setPassword","errorMessage","setErrorMessage","submit","json","success","className","onSubmit","preventDefault","test","checked","onChange","currentTarget","htmlFor","autoComplete","onClick","LoginForm","login","AccountModal","showModal","closeModal","defaultTab","activeTab","setActiveTab","itemClassName","items","webpackPolyfill","deprecate","paths","l","Modal","dialogRef","useRef","opacity","dy","style","background","contains","minWidth","transform","qs","regexp","split","maxKeys","len","kstr","vstr","x","replace","idx","substr","decodeURIComponent","runtime","Op","hasOwn","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","context","Context","_invoke","method","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","makeInvokeMethod","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","NativeIteratorPrototype","values","Gp","defineIteratorMethods","AsyncIterator","PromiseImpl","previousPromise","callInvokeWithMethodAndArg","invoke","__await","unwrapped","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","isGeneratorFunction","genFun","ctor","mark","awrap","async","iter","object","reverse","pop","skipTempReset","prev","charAt","slice","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","Function","Section","decode","encode","HttpClient","baseUrl","headers","responseCallbacks","_fetch","path","fetchOpts","allOpts","Accept","promise","fetch","reduce","acc","cur","additionalHeaders","referrerPolicy","post","body","postForm","formdata","del","authHttp","userLoading","logout","UserProvider","dfault","stored","localStorage","getItem","localStorageOrDefault","setToken","setUser","clearUser","detect401","http","useMemo","username","createUser","input","setItem","removeItem","Table","rows","columns","handleSelect","handleOpen","keyField","noDataText","col","field","class","label","stopPropagation","render","_createClass","Tabs"],"mappings":"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","file":"dbe438349927fff5c5e302cf7c4bec3429112c38-55f6dc835df1a8e8e731.js","sourcesContent":["export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n'use strict';\n\nvar stringifyPrimitive = function stringifyPrimitive(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function (obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return map(objectKeys(obj), function (k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n\n      if (isArray(obj[k])) {\n        return map(obj[k], function (v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq + encodeURIComponent(stringifyPrimitive(obj));\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nfunction map(xs, f) {\n  if (xs.map) return xs.map(f);\n  var res = [];\n\n  for (var i = 0; i < xs.length; i++) {\n    res.push(f(xs[i], i));\n  }\n\n  return res;\n}\n\nvar objectKeys = Object.keys || function (obj) {\n  var res = [];\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n  }\n\n  return res;\n};","export default class WSClient {\n  constructor(url, connector) {\n    this.url = url;\n    this.ws = null;\n    this.nextKey = 1;\n    this.listeners = new Map();\n    this.sendQueue = [];\n    this.connector = connector;\n    this.isConnecting = false;\n  }\n\n  setConnector(connector) {\n    this.connector = connector;\n  }\n\n  connect() {\n    this.isConnecting = true;\n    this.ws = new WebSocket(this.url);\n    this.ws.onmessage = ev => {\n      const message = JSON.parse(ev.data);\n      this.listeners.forEach(listener => {\n        listener(message);\n      });\n    };\n    this.ws.onopen = async () => {\n      await this.connector(this);\n      this.isConnecting = false;\n      this.send();\n    };\n  }\n\n  disconnect() {\n    this.isConnecting = false;\n    if (this.ws) {\n      this.ws.close();\n      this.ws.onopen = this.ws.onmessage = null;\n    }\n  }\n\n  addListener(listener) {\n    const key = this.nextKey.toString();\n    this.nextKey += 1;\n    this.listeners.set(key, listener);\n    return key;\n  }\n\n  removeListener(key) {\n    this.listeners.delete(key);\n  }\n\n  send(message) {\n    const messages = [...this.sendQueue];\n    if (message) messages.push(message);\n\n    if (\n      !this.isConnecting &&\n      this.ws &&\n      this.ws.readyState === WebSocket.OPEN\n    ) {\n      messages.forEach(m => this.ws.send(JSON.stringify(m)));\n      this.sendQueue = [];\n    } else {\n      this.sendQueue.push(message);\n      if (!this.isConnecting) {\n        this.connect();\n      }\n    }\n  }\n\n  sendSync(message) {\n    this.ws.send(JSON.stringify(message));\n  }\n\n  /**\n   * @param {any} message Object with action and data for WS server\n   * @param {{ returnType?: string }} options Options\n   */\n  async sendAndListen(message, options = {}) {\n    const listenForType = options.returnType || message.action;\n    return new Promise((resolve, reject) => {\n      const lk = this.addListener(response => {\n        if (response.type === listenForType) {\n          this.removeListener(lk);\n          return resolve(response);\n        }\n      });\n      this.sendSync(message);\n      setTimeout(() => reject('Timeout waiting for websocket response'), 30000);\n    });\n  }\n}\n","import React, { useState, useEffect, useContext, useCallback } from 'react';\nimport WSClient from '../../services/wsClient';\nimport { UserContext } from './userContext';\nimport { useAsyncTask } from '../../hooks/useAsyncTask';\nimport { navigate } from 'gatsby';\n\nexport const ChatContext = React.createContext({\n  roomId: null,\n  roomTitle: null,\n  roomUsers: null,\n  nickname: null,\n  isLoading: false,\n  isConnected: false,\n  isFirstLogin: false,\n  setFirstLogin: () => {},\n  sendMessage: () => {},\n  messages: [],\n});\n\nconst wsUrl = 'wss://datagame.live/ws';\nexport function ChatProvider({ children, roomId, getMessagesArgs = {} }) {\n  const { token, user } = useContext(UserContext);\n  const [roomTitle, setRoomTitle] = useState('');\n  const [nickname, setNickname] = useState('');\n  const [roomUsers, setRoomUsers] = useState({});\n  const [isFirstLogin, setFirstLogin] = useState(false);\n  const [messages, setMessages] = useState([]);\n\n  const mergeMessages = useCallback(toAdd => {\n    setMessages(messages => {\n      const ids = new Map(messages.map((m, i) => [m.id, i]));\n      const next = [...messages];\n      toAdd.forEach(m => {\n        const replaceIdx = ids.get(m.id);\n        if (replaceIdx === undefined) {\n          next.push(m);\n          ids.set(m.id, undefined);\n        } else {\n          next[replaceIdx] = m;\n        }\n      });\n      setMessages(next);\n    });\n  }, []);\n\n  const [wsClient, setWsClient] = useState();\n  const connect = useAsyncTask(\n    useCallback(\n      async client => {\n        const msg = await client.sendAndListen({\n          action: 'login',\n          data: { token },\n        });\n        setWsClient(client);\n        setRoomTitle(msg.title);\n        setNickname(msg.nickname);\n        setFirstLogin(msg.isFirstLogin);\n        client.send({\n          action: 'getMessages',\n          data: getMessagesArgs,\n        });\n      },\n      [getMessagesArgs, token]\n    )\n  );\n  useEffect(() => {\n    if (roomId && user && token) {\n      const nextClient = new WSClient(`${wsUrl}/${roomId}`, connect.run);\n      const lk = nextClient.addListener(message => {\n        if (message.type === 'message') {\n          mergeMessages([message.data]);\n        } else if (message.type === 'getMessages') {\n          mergeMessages(message.data);\n        }\n      });\n      nextClient.connect();\n\n      return () => {\n        nextClient.disconnect();\n        nextClient.removeListener(lk);\n        setWsClient(current => (current === nextClient ? undefined : current));\n        setMessages([]);\n      };\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [roomId, user, token]);\n  useEffect(() => {\n    if (wsClient) wsClient.setConnector(connect.run);\n  }, [connect.run, wsClient]);\n\n  const sendMessage = m => {\n    if (wsClient) wsClient.send(m);\n  };\n\n  useEffect(() => {\n    if (!wsClient) return;\n\n    const lk = wsClient.addListener(message => {\n      if (message.type === 'error') {\n        if (typeof message.message === 'string') {\n          if (message.message.startsWith('Unauthenticated')) wsClient.connect();\n          else if (message.message.startsWith('Invalid conversation id'))\n            navigate('/chat');\n        }\n      }\n    });\n\n    return () => {\n      if (wsClient) wsClient.removeListener(lk);\n    };\n  }, [wsClient]);\n  useEffect(() => {\n    if (!wsClient) return;\n\n    const lk = wsClient.addListener(message => {\n      if (message.type === 'setNickname') {\n        const { userId, nickname } = message.data;\n        if (userId === user.id) {\n          setNickname(nickname);\n        }\n        setRoomUsers(state => ({\n          ...state,\n          [userId]: {\n            ...state[userId],\n            nickname,\n          },\n        }));\n        setMessages(messages =>\n          messages.map(m => {\n            const mc = { ...m };\n            if (mc.sender.userId === userId) mc.sender.nickname = nickname;\n            return mc;\n          })\n        );\n      }\n    });\n\n    return () => {\n      if (wsClient) wsClient.removeListener(lk);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [wsClient]);\n\n  return (\n    <ChatContext.Provider\n      value={{\n        roomId,\n        roomTitle,\n        roomUsers,\n        nickname,\n        isLoading: connect.loading,\n        isConnected: wsClient != null,\n        isFirstLogin,\n        setFirstLogin,\n        sendMessage,\n        messages,\n      }}\n    >\n      {children}\n    </ChatContext.Provider>\n  );\n}\n","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","var frame = 0,\n    // is an animation frame pending?\ntimeout = 0,\n    // is a timeout pending?\ninterval = 0,\n    // are any timers active?\npokeDelay = 1000,\n    // how frequently we check for clock skew\ntaskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function (f) {\n  setTimeout(f, 17);\n};\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call = this._time = this._next = null;\n}\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function restart(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;else taskHead = this;\n      taskTail = this;\n    }\n\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function stop() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\nexport function timer(callback, delay, time) {\n  var t = new Timer();\n  t.restart(callback, delay, time);\n  return t;\n}\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n\n  ++frame; // Pretend weve set an alarm, if we havent already.\n\n  var t = taskHead,\n      e;\n\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(null, e);\n    t = t._next;\n  }\n\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(),\n      delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0,\n      t1 = taskHead,\n      t2,\n      time = Infinity;\n\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}","import { Timer } from \"./timer.js\";\nexport default function (callback, delay, time) {\n  var t = new Timer();\n  delay = delay == null ? 0 : +delay;\n  t.restart(function (elapsed) {\n    t.stop();\n    callback(elapsed + delay);\n  }, delay, time);\n  return t;\n}","function _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nvar transitionId = 0;\nexport function getTransitionId() {\n  return ++transitionId;\n}\nexport function extend(obj, props) {\n  for (var i in props) {\n    obj[i] = props[i];\n  }\n}\nexport function once(func) {\n  var called = false;\n  return function transitionEvent() {\n    if (!called) {\n      called = true;\n      func.call(this);\n    }\n  };\n}\nexport function isNamespace(prop) {\n  return _typeof(prop) === 'object' && Array.isArray(prop) === false;\n}\n\nvar linear = function linear(t) {\n  return +t;\n};\n\nexport var timingDefaults = {\n  delay: 0,\n  duration: 250,\n  ease: linear\n};","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nimport { once } from './utils';\nexport var Events = function Events(config) {\n  var _this = this;\n\n  _classCallCheck(this, Events);\n\n  this.start = null;\n  this.interrupt = null;\n  this.end = null;\n\n  if (config.events) {\n    Object.keys(config.events).forEach(function (d) {\n      if (typeof config.events[d] !== 'function') {\n        throw new Error('Event handlers must be a function');\n      } else {\n        _this[d] = once(config.events[d]);\n      }\n    });\n  }\n};\nexport default Events;","function _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nimport { now, timer, timeout } from 'd3-timer';\nimport { timingDefaults, extend, getTransitionId, isNamespace } from './utils';\nimport Events from './Events';\n\nvar BaseNode = function () {\n  function BaseNode(state) {\n    _classCallCheck(this, BaseNode);\n\n    this.state = state || {};\n  }\n\n  _createClass(BaseNode, [{\n    key: \"transition\",\n    value: function transition(config) {\n      if (Array.isArray(config)) {\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = config[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var item = _step.value;\n            this.parse(item);\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator.return != null) {\n              _iterator.return();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n      } else {\n        this.parse(config);\n      }\n    }\n  }, {\n    key: \"isTransitioning\",\n    value: function isTransitioning() {\n      return !!this.transitionData;\n    }\n  }, {\n    key: \"stopTransitions\",\n    value: function stopTransitions() {\n      var transitions = this.transitionData;\n\n      if (transitions) {\n        Object.keys(transitions).forEach(function (t) {\n          transitions[t].timer.stop();\n        });\n      }\n    }\n  }, {\n    key: \"setState\",\n    value: function setState(update) {\n      if (typeof update === 'function') {\n        extend(this.state, update(this.state));\n      } else {\n        extend(this.state, update);\n      }\n    }\n  }, {\n    key: \"parse\",\n    value: function parse(config) {\n      var _this = this;\n\n      var clone = _objectSpread({}, config);\n\n      var events = new Events(clone);\n\n      if (clone.events) {\n        delete clone.events;\n      }\n\n      var timing = _objectSpread({}, timingDefaults, clone.timing || {}, {\n        time: now()\n      });\n\n      if (clone.timing) {\n        delete clone.timing;\n      }\n\n      Object.keys(clone).forEach(function (stateKey) {\n        var tweens = [];\n        var next = clone[stateKey];\n\n        if (isNamespace(next)) {\n          Object.keys(next).forEach(function (attr) {\n            var val = next[attr];\n\n            if (Array.isArray(val)) {\n              if (val.length === 1) {\n                tweens.push(_this.getTween(attr, val[0], stateKey));\n              } else {\n                _this.setState(function (state) {\n                  var _objectSpread2, _ref;\n\n                  return _ref = {}, _ref[stateKey] = _objectSpread({}, state[stateKey], (_objectSpread2 = {}, _objectSpread2[attr] = val[0], _objectSpread2)), _ref;\n                });\n\n                tweens.push(_this.getTween(attr, val[1], stateKey));\n              }\n            } else if (typeof val === 'function') {\n              var getNameSpacedCustomTween = function getNameSpacedCustomTween() {\n                var kapellmeisterNamespacedTween = function kapellmeisterNamespacedTween(t) {\n                  _this.setState(function (state) {\n                    var _objectSpread3, _ref2;\n\n                    return _ref2 = {}, _ref2[stateKey] = _objectSpread({}, state[stateKey], (_objectSpread3 = {}, _objectSpread3[attr] = val(t), _objectSpread3)), _ref2;\n                  });\n                };\n\n                return kapellmeisterNamespacedTween;\n              };\n\n              tweens.push(getNameSpacedCustomTween);\n            } else {\n              _this.setState(function (state) {\n                var _objectSpread4, _ref3;\n\n                return _ref3 = {}, _ref3[stateKey] = _objectSpread({}, state[stateKey], (_objectSpread4 = {}, _objectSpread4[attr] = val, _objectSpread4)), _ref3;\n              });\n\n              tweens.push(_this.getTween(attr, val, stateKey));\n            }\n          });\n        } else {\n          if (Array.isArray(next)) {\n            if (next.length === 1) {\n              tweens.push(_this.getTween(stateKey, next[0], null));\n            } else {\n              var _this$setState;\n\n              _this.setState((_this$setState = {}, _this$setState[stateKey] = next[0], _this$setState));\n\n              tweens.push(_this.getTween(stateKey, next[1], null));\n            }\n          } else if (typeof next === 'function') {\n            var getCustomTween = function getCustomTween() {\n              var kapellmeisterTween = function kapellmeisterTween(t) {\n                var _this$setState2;\n\n                _this.setState((_this$setState2 = {}, _this$setState2[stateKey] = next(t), _this$setState2));\n              };\n\n              return kapellmeisterTween;\n            };\n\n            tweens.push(getCustomTween);\n          } else {\n            var _this$setState3;\n\n            _this.setState((_this$setState3 = {}, _this$setState3[stateKey] = next, _this$setState3));\n\n            tweens.push(_this.getTween(stateKey, next, null));\n          }\n        }\n\n        _this.update({\n          stateKey: stateKey,\n          timing: timing,\n          tweens: tweens,\n          events: events,\n          status: 0\n        });\n      });\n    }\n  }, {\n    key: \"getTween\",\n    value: function getTween(attr, endValue, nameSpace) {\n      var _this2 = this;\n\n      return function () {\n        var begValue = nameSpace ? _this2.state[nameSpace][attr] : _this2.state[attr];\n\n        if (begValue === endValue) {\n          return null;\n        }\n\n        var i = _this2.getInterpolator(begValue, endValue, attr, nameSpace);\n\n        var stateTween;\n\n        if (nameSpace === null) {\n          stateTween = function stateTween(t) {\n            var _this2$setState;\n\n            _this2.setState((_this2$setState = {}, _this2$setState[attr] = i(t), _this2$setState));\n          };\n        } else {\n          stateTween = function stateTween(t) {\n            _this2.setState(function (state) {\n              var _objectSpread5, _ref4;\n\n              return _ref4 = {}, _ref4[nameSpace] = _objectSpread({}, state[nameSpace], (_objectSpread5 = {}, _objectSpread5[attr] = i(t), _objectSpread5)), _ref4;\n            });\n          };\n        }\n\n        return stateTween;\n      };\n    }\n  }, {\n    key: \"update\",\n    value: function update(transition) {\n      if (!this.transitionData) {\n        this.transitionData = {};\n      }\n\n      this.init(getTransitionId(), transition);\n    }\n  }, {\n    key: \"init\",\n    value: function init(id, transition) {\n      var _this3 = this;\n\n      var n = transition.tweens.length;\n      var tweens = new Array(n);\n\n      var queue = function queue(elapsed) {\n        transition.status = 1;\n        transition.timer.restart(start, transition.timing.delay, transition.timing.time);\n\n        if (transition.timing.delay <= elapsed) {\n          start(elapsed - transition.timing.delay);\n        }\n      };\n\n      this.transitionData[id] = transition;\n      transition.timer = timer(queue, 0, transition.timing.time);\n\n      var start = function start(elapsed) {\n        if (transition.status !== 1) return stop();\n\n        for (var tid in _this3.transitionData) {\n          var t = _this3.transitionData[tid];\n\n          if (t.stateKey !== transition.stateKey) {\n            continue;\n          }\n\n          if (t.status === 3) {\n            return timeout(start);\n          }\n\n          if (t.status === 4) {\n            t.status = 6;\n            t.timer.stop();\n\n            if (t.events.interrupt) {\n              t.events.interrupt.call(_this3);\n            }\n\n            delete _this3.transitionData[tid];\n          } else if (+tid < id) {\n            t.status = 6;\n            t.timer.stop();\n            delete _this3.transitionData[tid];\n          }\n        }\n\n        timeout(function () {\n          if (transition.status === 3) {\n            transition.status = 4;\n            transition.timer.restart(tick, transition.timing.delay, transition.timing.time);\n            tick(elapsed);\n          }\n        });\n        transition.status = 2;\n\n        if (transition.events.start) {\n          transition.events.start.call(_this3);\n        }\n\n        if (transition.status !== 2) {\n          return;\n        }\n\n        transition.status = 3;\n        var j = -1;\n\n        for (var i = 0; i < n; ++i) {\n          var res = transition.tweens[i]();\n\n          if (res) {\n            tweens[++j] = res;\n          }\n        }\n\n        tweens.length = j + 1;\n      };\n\n      var tick = function tick(elapsed) {\n        var t = 1;\n\n        if (elapsed < transition.timing.duration) {\n          t = transition.timing.ease(elapsed / transition.timing.duration);\n        } else {\n          transition.timer.restart(stop);\n          transition.status = 5;\n        }\n\n        var i = -1;\n\n        while (++i < tweens.length) {\n          tweens[i](t);\n        }\n\n        if (transition.status === 5) {\n          if (transition.events.end) {\n            transition.events.end.call(_this3);\n          }\n\n          stop();\n        }\n      };\n\n      var stop = function stop() {\n        transition.status = 6;\n        transition.timer.stop();\n        delete _this3.transitionData[id];\n\n        for (var _ in _this3.transitionData) {\n          return;\n        }\n\n        delete _this3.transitionData;\n      };\n    }\n  }]);\n\n  return BaseNode;\n}();\n\nexport default BaseNode;","function mergeKeys(currNodeKeys, currKeyIndex, nextNodeKeys, nextKeyIndex) {\n  var allKeys = [];\n\n  for (var i = 0; i < nextNodeKeys.length; i++) {\n    allKeys[i] = nextNodeKeys[i];\n  }\n\n  for (var _i = 0; _i < currNodeKeys.length; _i++) {\n    if (nextKeyIndex[currNodeKeys[_i]] === undefined) {\n      allKeys.push(currNodeKeys[_i]);\n    }\n  }\n\n  return allKeys.sort(function (a, b) {\n    var nextOrderA = nextKeyIndex[a];\n    var nextOrderB = nextKeyIndex[b];\n    var currOrderA = currKeyIndex[a];\n    var currOrderB = currKeyIndex[b];\n\n    if (nextOrderA != null && nextOrderB != null) {\n      return nextKeyIndex[a] - nextKeyIndex[b];\n    } else if (currOrderA != null && currOrderB != null) {\n      return currKeyIndex[a] - currKeyIndex[b];\n    } else if (nextOrderA != null) {\n      for (var _i2 = 0; _i2 < nextNodeKeys.length; _i2++) {\n        var pivot = nextNodeKeys[_i2];\n\n        if (!currKeyIndex[pivot]) {\n          continue;\n        }\n\n        if (nextOrderA < nextKeyIndex[pivot] && currOrderB > currKeyIndex[pivot]) {\n          return -1;\n        } else if (nextOrderA > nextKeyIndex[pivot] && currOrderB < currKeyIndex[pivot]) {\n          return 1;\n        }\n      }\n\n      return 1;\n    }\n\n    for (var _i3 = 0; _i3 < nextNodeKeys.length; _i3++) {\n      var _pivot = nextNodeKeys[_i3];\n\n      if (!currKeyIndex[_pivot]) {\n        continue;\n      }\n\n      if (nextOrderB < nextKeyIndex[_pivot] && currOrderA > currKeyIndex[_pivot]) {\n        return 1;\n      } else if (nextOrderB > nextKeyIndex[_pivot] && currOrderA < currKeyIndex[_pivot]) {\n        return -1;\n      }\n    }\n\n    return -1;\n  });\n}\n\nexport default mergeKeys;","export function numeric(beg, end) {\n  var a = +beg;\n  var b = +end - a;\n  return function (t) {\n    return a + b * t;\n  };\n}","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { BaseNode, interval } from 'kapellmeister';\nimport mergeKeys from '../core/mergeKeys';\nimport { ENTER, UPDATE, LEAVE } from '../core/types';\nimport { numeric } from '../utils';\n\nvar NodeGroup = function (_Component) {\n  _inherits(NodeGroup, _Component);\n\n  var _super = _createSuper(NodeGroup);\n\n  function NodeGroup(props) {\n    var _this;\n\n    _classCallCheck(this, NodeGroup);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"animate\", function () {\n      var _this$state = _this.state,\n          nodeKeys = _this$state.nodeKeys,\n          nodeHash = _this$state.nodeHash;\n\n      if (_this.unmounting) {\n        return;\n      }\n\n      var pending = false;\n      var nextNodeKeys = [];\n      var length = nodeKeys.length;\n\n      for (var i = 0; i < length; i++) {\n        var k = nodeKeys[i];\n        var n = nodeHash[k];\n        var isTransitioning = n.isTransitioning();\n\n        if (isTransitioning) {\n          pending = true;\n        }\n\n        if (n.type === LEAVE && !isTransitioning) {\n          delete nodeHash[k];\n        } else {\n          nextNodeKeys.push(k);\n        }\n      }\n\n      if (!pending) {\n        _this.interval.stop();\n      }\n\n      _this.setState(function () {\n        return {\n          nodeKeys: nextNodeKeys,\n          nodes: nextNodeKeys.map(function (key) {\n            return nodeHash[key];\n          })\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"interval\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"unmounting\", false);\n\n    var interpolation = props.interpolation;\n\n    var Node = function (_BaseNode) {\n      _inherits(Node, _BaseNode);\n\n      var _super2 = _createSuper(Node);\n\n      function Node(key, data) {\n        var _this2;\n\n        _classCallCheck(this, Node);\n\n        _this2 = _super2.call(this);\n\n        _defineProperty(_assertThisInitialized(_this2), \"getInterpolator\", interpolation);\n\n        _this2.key = key;\n        _this2.data = data;\n        _this2.type = ENTER;\n        return _this2;\n      }\n\n      return Node;\n    }(BaseNode);\n\n    _this.state = {\n      Node: Node,\n      nodeKeys: [],\n      nodeHash: {},\n      nodes: [],\n      data: null\n    };\n    return _this;\n  }\n\n  _createClass(NodeGroup, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.startInterval();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.data !== this.props.data && !this.unmounting) {\n        this.startInterval();\n      }\n    }\n  }, {\n    key: \"startInterval\",\n    value: function startInterval() {\n      if (!this.interval) {\n        this.interval = interval(this.animate);\n      } else {\n        this.interval.restart(this.animate);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var _this$state2 = this.state,\n          nodeKeys = _this$state2.nodeKeys,\n          nodeHash = _this$state2.nodeHash;\n      this.unmounting = true;\n\n      if (this.interval) {\n        this.interval.stop();\n      }\n\n      nodeKeys.forEach(function (key) {\n        nodeHash[key].stopTransitions();\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var renderedChildren = this.props.children(this.state.nodes);\n      return renderedChildren && React.Children.only(renderedChildren);\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps, prevState) {\n      if (nextProps.data !== prevState.data) {\n        var data = nextProps.data,\n            keyAccessor = nextProps.keyAccessor,\n            start = nextProps.start,\n            enter = nextProps.enter,\n            update = nextProps.update,\n            leave = nextProps.leave;\n        var Node = prevState.Node,\n            nodeKeys = prevState.nodeKeys,\n            nodeHash = prevState.nodeHash;\n        var keyIndex = {};\n\n        for (var i = 0; i < nodeKeys.length; i++) {\n          keyIndex[nodeKeys[i]] = i;\n        }\n\n        var nextKeyIndex = {};\n        var nextNodeKeys = [];\n\n        for (var _i = 0; _i < data.length; _i++) {\n          var d = data[_i];\n          var k = keyAccessor(d, _i);\n          nextKeyIndex[k] = _i;\n          nextNodeKeys.push(k);\n\n          if (keyIndex[k] === undefined) {\n            var node = new Node();\n            node.key = k;\n            node.data = d;\n            node.type = ENTER;\n            nodeHash[k] = node;\n          }\n        }\n\n        for (var _i2 = 0; _i2 < nodeKeys.length; _i2++) {\n          var _k = nodeKeys[_i2];\n          var n = nodeHash[_k];\n\n          if (nextKeyIndex[_k] !== undefined) {\n            n.data = data[nextKeyIndex[_k]];\n            n.type = UPDATE;\n          } else {\n            n.type = LEAVE;\n          }\n        }\n\n        var mergedNodeKeys = mergeKeys(nodeKeys, keyIndex, nextNodeKeys, nextKeyIndex);\n\n        for (var _i3 = 0; _i3 < mergedNodeKeys.length; _i3++) {\n          var _k2 = mergedNodeKeys[_i3];\n          var _n = nodeHash[_k2];\n          var _d = _n.data;\n\n          if (_n.type === ENTER) {\n            _n.setState(start(_d, nextKeyIndex[_k2]));\n\n            _n.transition(enter(_d, nextKeyIndex[_k2]));\n          } else if (_n.type === LEAVE) {\n            _n.transition(leave(_d, keyIndex[_k2]));\n          } else {\n            _n.transition(update(_d, nextKeyIndex[_k2]));\n          }\n        }\n\n        return {\n          data: data,\n          nodes: mergedNodeKeys.map(function (key) {\n            return nodeHash[key];\n          }),\n          nodeHash: nodeHash,\n          nodeKeys: mergedNodeKeys\n        };\n      }\n\n      return null;\n    }\n  }]);\n\n  return NodeGroup;\n}(Component);\n\nNodeGroup.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  data: PropTypes.array.isRequired,\n  keyAccessor: PropTypes.func.isRequired,\n  interpolation: PropTypes.func,\n  start: PropTypes.func.isRequired,\n  enter: PropTypes.func,\n  update: PropTypes.func,\n  leave: PropTypes.func,\n  children: PropTypes.func.isRequired\n} : {};\nNodeGroup.defaultProps = {\n  enter: function enter() {},\n  update: function update() {},\n  leave: function leave() {},\n  interpolation: numeric\n};\nexport default NodeGroup;","export var ENTER = 'ENTER';\nexport var UPDATE = 'UPDATE';\nexport var LEAVE = 'LEAVE';","import { Timer, now } from \"./timer.js\";\nexport default function (callback, delay, time) {\n  var t = new Timer(),\n      total = delay;\n  if (delay == null) return t.restart(callback, delay, time), t;\n  delay = +delay, time = time == null ? now() : +time;\n  t.restart(function tick(elapsed) {\n    elapsed += total;\n    t.restart(tick, total += delay, time);\n    callback(elapsed);\n  }, delay, time);\n  return t;\n}","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nimport React, { Component } from 'react';\nimport NodeGroup from '../NodeGroup';\nimport { numeric } from '../utils';\n\nvar keyAccessor = function keyAccessor() {\n  return '$$key$$';\n};\n\nvar Animate = function (_Component) {\n  _inherits(Animate, _Component);\n\n  var _super = _createSuper(Animate);\n\n  function Animate() {\n    _classCallCheck(this, Animate);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(Animate, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          show = _this$props.show,\n          start = _this$props.start,\n          enter = _this$props.enter,\n          update = _this$props.update,\n          leave = _this$props.leave,\n          interpolation = _this$props.interpolation,\n          children = _this$props.children;\n      var data = typeof start === 'function' ? start() : start;\n      return React.createElement(NodeGroup, {\n        data: show ? [data] : [],\n        start: function start() {\n          return data;\n        },\n        keyAccessor: keyAccessor,\n        interpolation: interpolation,\n        enter: typeof enter === 'function' ? enter : function () {\n          return enter;\n        },\n        update: typeof update === 'function' ? update : function () {\n          return update;\n        },\n        leave: typeof leave === 'function' ? leave : function () {\n          return leave;\n        }\n      }, function (nodes) {\n        if (!nodes[0]) {\n          return null;\n        }\n\n        var renderedChildren = children(nodes[0].state);\n        return renderedChildren && React.Children.only(renderedChildren);\n      });\n    }\n  }]);\n\n  return Animate;\n}(Component);\n\nAnimate.defaultProps = {\n  show: true,\n  interpolation: numeric\n};\nexport default Animate;","function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nimport React, { forwardRef } from 'react';\nvar ArrowLeft = forwardRef(function (_ref, ref) {\n  var _ref$color = _ref.color,\n      color = _ref$color === void 0 ? 'currentColor' : _ref$color,\n      _ref$size = _ref.size,\n      size = _ref$size === void 0 ? 24 : _ref$size,\n      rest = _objectWithoutProperties(_ref, [\"color\", \"size\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    ref: ref,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: size,\n    height: size,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: color,\n    strokeWidth: \"2\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }, rest), /*#__PURE__*/React.createElement(\"line\", {\n    x1: \"19\",\n    y1: \"12\",\n    x2: \"5\",\n    y2: \"12\"\n  }), /*#__PURE__*/React.createElement(\"polyline\", {\n    points: \"12 19 5 12 12 5\"\n  }));\n});\nArrowLeft.displayName = 'ArrowLeft';\nexport default ArrowLeft;","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","import { useState } from 'react';\n\n/**\n * Returns the function along with info about the most recent call\n *\n * @param {(...args: any[]) => Promise<any>} asyncFn\n */\nexport const useAsyncTask = asyncFn => {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState();\n\n  const run = async (...args) => {\n    setLoading(true);\n    setError(undefined);\n    try {\n      return await asyncFn(...args);\n    } catch (err) {\n      setError(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return {\n    error,\n    loading,\n    run,\n  };\n};\n","import React, { useContext, useEffect, useState } from 'react';\nimport { Modal } from '../modal';\nimport { UserContext } from './userContext';\nimport { Tabs } from '../tabs';\nimport { useAsyncTask } from '../../hooks/useAsyncTask';\n\nexport function RegisterForm({ onCancel, onSuccess, allowGuest = true }) {\n  const { createGuest, register } = useContext(UserContext);\n\n  const [isGuest, setIsGuest] = useState(allowGuest);\n  const [inputUsername, setInputUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [errorMessage, setErrorMessage] = useState();\n\n  const submit = useAsyncTask(async () => {\n    let json;\n    if (isGuest) {\n      json = await createGuest();\n    } else {\n      json = await register(inputUsername, password);\n    }\n\n    if (json.success && onSuccess) onSuccess();\n    else setErrorMessage(json.message || 'Unknown error');\n  });\n  const handleSubmit = ev => {\n    ev.preventDefault();\n    if (!isGuest) {\n      if (inputUsername.length < 2 || inputUsername.length > 63) {\n        setErrorMessage('Username must be 2-63 characters');\n        return;\n      }\n      if (/[^A-Za-z0-9-_.]/.test(inputUsername)) {\n        setErrorMessage('Username can not contain special characters');\n        return;\n      }\n      if (password.length < 8) {\n        setErrorMessage('Password must be at least 8 characters long');\n        return;\n      }\n    }\n\n    if (!submit.loading) submit.run();\n  };\n\n  return (\n    <form className=\"pt-1\" onSubmit={handleSubmit}>\n      {allowGuest && (\n        <>\n          <input\n            className=\"mr-2 mb-3\"\n            type=\"checkbox\"\n            name=\"isGuest\"\n            checked={isGuest}\n            onChange={ev => setIsGuest(ev.currentTarget.checked)}\n          />\n          <label\n            className=\"inline-block text-sm text-pen-light\"\n            htmlFor=\"username\"\n          >\n            Use guest account?\n          </label>\n        </>\n      )}\n      {!isGuest && (\n        <>\n          <label className=\"block text-sm text-pen-light\" htmlFor=\"username\">\n            Username\n          </label>\n          <input\n            name=\"username\"\n            type=\"text\"\n            autoComplete=\"off\"\n            className=\"bg-paper-dark rounded p-2 my-1 outline-none\"\n            value={inputUsername}\n            onChange={ev => {\n              setErrorMessage(undefined);\n              setInputUsername(ev.currentTarget.value);\n            }}\n          />\n          <label className=\"block text-sm text-pen-light\" htmlFor=\"password\">\n            Password\n          </label>\n          <input\n            name=\"password\"\n            type=\"password\"\n            autoComplete=\"off\"\n            className=\"bg-paper-dark rounded p-2 my-1 outline-none\"\n            value={password}\n            onChange={ev => {\n              setErrorMessage(undefined);\n              setPassword(ev.currentTarget.value);\n            }}\n          />\n        </>\n      )}\n      <div className=\"flex justify-end mt-3 -mx-1\">\n        {onCancel && (\n          <button\n            type=\"button\"\n            onClick={onCancel}\n            className=\"bg-gray-400 hover:bg-gray-500 text-black py-1 px-3 m-1 rounded\"\n          >\n            Cancel\n          </button>\n        )}\n        <button\n          type=\"submit\"\n          className=\"bg-green-500 hover:bg-green-600 text-white py-1 px-3 m-1 rounded\"\n        >\n          Register\n        </button>\n      </div>\n      {errorMessage && <p className=\"mt-2 mb-0 text-danger\">{errorMessage}</p>}\n    </form>\n  );\n}\n\nexport function LoginForm({ onCancel, onSuccess }) {\n  const { login } = useContext(UserContext);\n  const [inputUsername, setInputUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [errorMessage, setErrorMessage] = useState();\n\n  const submit = useAsyncTask(async () => {\n    const json = await login(inputUsername, password);\n    if (json.success && onSuccess) onSuccess();\n    else setErrorMessage(json.message || 'Unknown error');\n  });\n  const handleSubmit = ev => {\n    ev.preventDefault();\n    if (!submit.loading) submit.run();\n  };\n\n  return (\n    <form className=\"pt-1\" onSubmit={handleSubmit}>\n      <label className=\"block text-sm text-pen-light\" htmlFor=\"username\">\n        Username\n      </label>\n      <input\n        name=\"username\"\n        type=\"text\"\n        autoComplete=\"off\"\n        className=\"bg-paper-dark rounded p-2 my-1 outline-none\"\n        value={inputUsername}\n        onChange={ev => {\n          setErrorMessage(undefined);\n          setInputUsername(ev.currentTarget.value);\n        }}\n      />\n      <label className=\"block text-sm text-pen-light\" htmlFor=\"password\">\n        Password\n      </label>\n      <input\n        name=\"password\"\n        type=\"password\"\n        autoComplete=\"off\"\n        className=\"bg-paper-dark rounded p-2 my-1 outline-none\"\n        value={password}\n        onChange={ev => {\n          setErrorMessage(undefined);\n          setPassword(ev.currentTarget.value);\n        }}\n      />\n      <div className=\"flex justify-end mt-3 -mx-1\">\n        {onCancel && (\n          <button\n            type=\"button\"\n            onClick={onCancel}\n            className=\"bg-gray-400 hover:bg-gray-500 text-black py-1 px-3 m-1 rounded\"\n          >\n            Cancel\n          </button>\n        )}\n        <button\n          type=\"submit\"\n          className=\"bg-green-500 hover:bg-green-600 text-white py-1 px-3 m-1 rounded\"\n        >\n          Log in\n        </button>\n      </div>\n      {errorMessage && <p className=\"mt-2 mb-0 text-danger\">{errorMessage}</p>}\n    </form>\n  );\n}\n\nexport function AccountModal({ showModal, closeModal, defaultTab }) {\n  const [activeTab, setActiveTab] = useState(defaultTab);\n  useEffect(() => {\n    if (showModal) setActiveTab(defaultTab);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [showModal]);\n  return (\n    <Modal showModal={showModal} closeModal={closeModal}>\n      <Tabs\n        className=\"mb-3\"\n        itemClassName=\"hover:bg-paper-dark\"\n        activeTab={activeTab}\n        setActiveTab={setActiveTab}\n        items={['Register', 'Log in']}\n      >\n        {activeTab === 0 && (\n          <RegisterForm onCancel={closeModal} onSuccess={closeModal} />\n        )}\n        {activeTab === 1 && (\n          <LoginForm onCancel={closeModal} onSuccess={closeModal} />\n        )}\n      </Tabs>\n    </Modal>\n  );\n}\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","import React, { useRef } from 'react';\nimport { Animate } from 'react-move';\n\nexport function Modal({ showModal, closeModal, children }) {\n  const dialogRef = useRef(null);\n\n  return (\n    <Animate\n      show={showModal}\n      start={() => ({ opacity: 0, dy: -100 })}\n      enter={() => ({ opacity: [1], dy: [0] })}\n      leave={() => [{ opacity: [0] }, { dy: [-200], timing: { delay: 100 } }]}\n    >\n      {({ opacity, dy }) => (\n        <div\n          className=\"fixed top-0 left-0 h-full w-full overflow-hidden outline-none\"\n          style={{\n            transition: 'opacity .1s linear',\n            background: `rgba(0, 0, 0, 0.35)`,\n            opacity: opacity,\n          }}\n          onClick={ev => {\n            if (dialogRef.current && !dialogRef.current.contains(ev.target)) {\n              closeModal();\n            }\n          }}\n        >\n          <div className=\"my-5 px-5 mx-auto max-w-md flex flex-col justify-center items-center h-full\">\n            <div\n              className=\"bg-paper-darker rounded card modal-dialog p-4\"\n              style={{\n                minWidth: `calc(min(100%, 20rem))`,\n                transition: 'transform .1s ease-out',\n                transform: `translate(0, ${dy}px)`,\n              }}\n              ref={dialogRef}\n            >\n              {children}\n            </div>\n          </div>\n        </div>\n      )}\n    </Animate>\n  );\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n'use strict'; // If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function (qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n  var maxKeys = 1000;\n\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length; // maxKeys <= 0 means that we should not limit keys count\n\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr,\n        vstr,\n        k,\n        v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","module.exports = require(\"regenerator-runtime\");\n","import React from 'react';\n\nconst Section = ({ children, className }) => {\n  return (\n    <section className={className}>\n      <div className=\"container mx-auto\">{children}</div>\n    </section>\n  );\n};\n\nSection.defaultProps = {\n  className: 'px-5 mt-10',\n};\n\nexport default Section;\n","'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');","export default class HttpClient {\n  /**\n   * @param {string} baseUrl The base URL for requests\n   * @param {Record<string, string>} headers The headers to include with every request\n   * @param {Array<(json: object) => PromiseLike<object>>} responseCallbacks\n   * Callbacks to add to the promise chain\n   */\n  constructor(baseUrl, headers = {}, responseCallbacks = []) {\n    this.baseUrl = baseUrl;\n    this.headers = headers;\n    this.responseCallbacks = responseCallbacks;\n  }\n\n  _fetch(path, fetchOpts) {\n    const allOpts = {\n      ...fetchOpts,\n      headers: {\n        ...fetchOpts.headers,\n        Accept: 'application/json',\n      },\n    };\n    const promise = fetch(`${this.baseUrl}${path}`, allOpts).then(\n      response => response.json(),\n      err => ({\n        message: 'Network error',\n        success: false,\n      })\n    );\n    return this.responseCallbacks.reduce((acc, cur) => acc.then(cur), promise);\n  }\n\n  get(path, additionalHeaders = {}) {\n    return this._fetch(path, {\n      method: 'GET',\n      headers: {\n        ...this.headers,\n        ...additionalHeaders,\n      },\n      referrerPolicy: 'no-referrer',\n    });\n  }\n\n  post(path, data, additionalHeaders = {}) {\n    return this._fetch(path, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        ...this.headers,\n        ...additionalHeaders,\n      },\n      referrerPolicy: 'no-referrer',\n      body: JSON.stringify(data),\n    });\n  }\n\n  postForm(path, formdata, additionalHeaders = {}) {\n    return this._fetch(path, {\n      method: 'POST',\n      headers: {\n        ...this.headers,\n        ...additionalHeaders,\n      },\n      referrerPolicy: 'no-referrer',\n      body: formdata,\n    });\n  }\n\n  del(path, data, additionalHeaders = {}) {\n    return this._fetch(path, {\n      method: 'DELETE',\n      headers: {\n        ...this.headers,\n        ...additionalHeaders,\n      },\n      referrerPolicy: 'no-referrer',\n      body: JSON.stringify(data),\n    });\n  }\n}\n","import React, { useState, useEffect, useMemo, useCallback } from 'react';\nimport HttpClient from '../../services/httpClient';\n\nconst baseUrl = 'https://datagame.live';\nconst tokenStoreKey = 'chat/auth_token';\n\nconst localStorageOrDefault = (key, dfault) => {\n  if (typeof window === 'undefined') return dfault;\n  try {\n    const stored = localStorage.getItem(key);\n    return stored !== null ? stored : dfault;\n  } catch {}\n  return dfault;\n};\n\nexport const UserContext = React.createContext({\n  token: null,\n  authHttp: null,\n  user: null,\n  userLoading: false,\n  createGuest: () => {},\n  register: () => {},\n  login: () => {},\n  logout: () => {},\n});\n\nexport function UserProvider(props) {\n  const [token, setToken] = useState(() =>\n    localStorageOrDefault(tokenStoreKey, null)\n  );\n  const [user, setUser] = useState(null);\n  const clearUser = useCallback(() => {\n    setToken(null);\n    setUser(null);\n  }, []);\n  const detect401 = useCallback(\n    json => {\n      if (!json.success && /^Unauthenticated/.test(json.message)) {\n        clearUser();\n      }\n      return json;\n    },\n    [clearUser]\n  );\n  const [http] = useState(() => new HttpClient(baseUrl));\n  const authHttp = useMemo(() => {\n    if (!token) return null;\n    const headers = {\n      'X-Access-Token': token,\n    };\n    return new HttpClient(baseUrl, headers, [detect401]);\n  }, [detect401, token]);\n  useEffect(() => {\n    if (token && !user) {\n      authHttp\n        .get('/me')\n        .then(detect401)\n        .then(json => {\n          if (json.success) {\n            setUser({ id: json.userId, username: json.username });\n          }\n        });\n    }\n  }, [authHttp, detect401, token, user]);\n\n  const createUser = async input => {\n    const json = await http.post('/u', input);\n    if (json.success) {\n      localStorage.setItem(tokenStoreKey, json.token);\n      setToken(json.token);\n      setUser({ id: json.userId, username: json.username });\n    }\n    return json;\n  };\n  const register = (username, password) => createUser({ username, password });\n  const createGuest = () => createUser({ isGuest: true });\n  const login = async (username, password) => {\n    const json = await http.post('/login', {\n      username,\n      password,\n    });\n    if (json.success) {\n      localStorage.setItem(tokenStoreKey, json.token);\n      setToken(json.token);\n      setUser({ id: json.userId, username: json.username });\n    }\n    return json;\n  };\n  const logout = () => {\n    if (typeof window !== 'undefined') {\n      localStorage.removeItem(tokenStoreKey);\n    }\n    clearUser();\n  };\n\n  return (\n    <UserContext.Provider\n      value={{\n        token,\n        authHttp,\n        user,\n        userLoading: token && !user,\n        createGuest,\n        register,\n        login,\n        logout,\n      }}\n    >\n      {props.children}\n    </UserContext.Provider>\n  );\n}\n","import React from 'react';\n\nfunction Table({\n  rows,\n  columns,\n  handleSelect,\n  handleOpen,\n  keyField,\n  noDataText,\n}) {\n  if (rows.length === 0) {\n    return <p className=\"mt-2\">{noDataText || ''}</p>;\n  }\n\n  return (\n    <table className=\"w-full mt-2\">\n      <thead>\n        <tr>\n          <th style={{ width: 1 }}></th>\n          {columns.map(col => (\n            <th key={col.field} className={'px-2 py-1 ' + col.class || ''}>\n              {col.label ?? col.field}\n            </th>\n          ))}\n        </tr>\n      </thead>\n      <tbody>\n        {rows.map(item => (\n          <tr\n            key={item[keyField]}\n            className=\"hover:bg-paper-darker cursor-pointer\"\n            onClick={ev => handleOpen(item)}\n          >\n            <td className=\"px-2 pt-1\">\n              <input\n                type=\"checkbox\"\n                onClick={ev => ev.stopPropagation()}\n                onChange={ev => handleSelect(item, ev.target.checked)}\n              ></input>\n            </td>\n            {columns.map(col => (\n              <td key={col.field} className={'px-2 py-1 ' + col.class || ''}>\n                {col.render\n                  ? col.render(item[col.field], item)\n                  : item[col.field]}\n              </td>\n            ))}\n          </tr>\n        ))}\n      </tbody>\n    </table>\n  );\n}\n\nexport default Table;\n","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","import React from 'react';\n\nexport function Tabs({\n  activeTab,\n  setActiveTab,\n  className,\n  items,\n  itemClassName,\n  children,\n}) {\n  return (\n    <div>\n      <ul className={'flex -mx-1' + (className ? ` ${className}` : '')}>\n        {items.map((label, idx) => (\n          <li className=\"mx-1 flex-1\" key={idx}>\n            <button\n              className={\n                'inline-block w-full text-center border-accent-200 py-1 px-3 rounded-t' +\n                (itemClassName\n                  ? ` ${itemClassName}`\n                  : ' hover:bg-paper-darker') +\n                (activeTab === idx ? ' border-b' : '')\n              }\n              onClick={() => setActiveTab(idx)}\n            >\n              {label}\n            </button>\n          </li>\n        ))}\n      </ul>\n      {children}\n    </div>\n  );\n}\n"],"sourceRoot":""}