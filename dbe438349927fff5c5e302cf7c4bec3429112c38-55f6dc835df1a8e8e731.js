(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"1OyB":function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",(function(){return r}))},"4JlD":function(t,e,n){"use strict";var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,u){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?o(i(t),(function(i){var u=encodeURIComponent(r(i))+n;return a(t[i])?o(t[i],(function(t){return u+encodeURIComponent(r(t))})).join(e):u+encodeURIComponent(r(t[i]))})).join(e):u?encodeURIComponent(r(u))+n+encodeURIComponent(r(t)):""};var a=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function o(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var i=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},"5KzI":function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"b",(function(){return d}));var r=n("o0o1"),a=n.n(r),o=(n("ls82"),n("HaE+")),i=n("KQm4"),u=n("q1tI"),c=n.n(u),s=function(){function t(t,e){this.url=t,this.ws=null,this.nextKey=1,this.listeners=new Map,this.sendQueue=[],this.connector=e,this.isConnecting=!1}var e=t.prototype;return e.setConnector=function(t){this.connector=t},e.connect=function(){var t=this;this.isConnecting=!0,this.ws=new WebSocket(this.url),this.ws.onmessage=function(e){var n=JSON.parse(e.data);t.listeners.forEach((function(t){t(n)}))},this.ws.onopen=Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.connector(t);case 2:t.isConnecting=!1,t.send();case 4:case"end":return e.stop()}}),e)})))},e.disconnect=function(){this.isConnecting=!1,this.ws&&(this.ws.close(),this.ws.onopen=this.ws.onmessage=null)},e.addListener=function(t){var e=this.nextKey.toString();return this.nextKey+=1,this.listeners.set(e,t),e},e.removeListener=function(t){this.listeners.delete(t)},e.send=function(t){var e=this,n=Object(i.a)(this.sendQueue);t&&n.push(t),!this.isConnecting&&this.ws&&this.ws.readyState===WebSocket.OPEN?(n.forEach((function(t){return e.ws.send(JSON.stringify(t))})),this.sendQueue=[]):(this.sendQueue.push(t),this.isConnecting||this.connect())},e.sendSync=function(t){this.ws.send(JSON.stringify(t))},e.sendAndListen=function(){var t=Object(o.a)(a.a.mark((function t(e,n){var r,o=this;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===n&&(n={}),r=n.returnType||e.action,t.abrupt("return",new Promise((function(t,n){var a=o.addListener((function(e){if(e.type===r)return o.removeListener(a),t(e)}));o.sendSync(e),setTimeout((function(){return n("Timeout waiting for websocket response")}),3e4)})));case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),t}(),l=n("t0Xt"),f=n("K9Fk"),p=n("Wbzz"),h=c.a.createContext({roomId:null,roomTitle:null,roomUsers:null,nickname:null,isLoading:!1,isConnected:!1,isFirstLogin:!1,setFirstLogin:function(){},sendMessage:function(){},messages:[]});function d(t){var e=t.children,n=t.roomId,r=t.getMessagesArgs,d=void 0===r?{}:r,m=Object(u.useContext)(l.a),v=m.token,y=m.user,g=Object(u.useState)(""),b=g[0],w=g[1],O=Object(u.useState)(""),x=O[0],k=O[1],j=Object(u.useState)({}),E=j[0],S=j[1],N=Object(u.useState)(!1),C=N[0],L=N[1],_=Object(u.useState)([]),T=_[0],P=_[1],I=Object(u.useCallback)((function(t){P((function(e){var n=new Map(e.map((function(t,e){return[t.id,e]}))),r=Object(i.a)(e);t.forEach((function(t){var e=n.get(t.id);void 0===e?(r.push(t),n.set(t.id,void 0)):r[e]=t})),P(r)}))}),[]),A=Object(u.useState)(),D=A[0],F=A[1],R=Object(f.a)(Object(u.useCallback)(function(){var t=Object(o.a)(a.a.mark((function t(e){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.sendAndListen({action:"login",data:{token:v}});case 2:n=t.sent,F(e),w(n.title),k(n.nickname),L(n.isFirstLogin),e.send({action:"getMessages",data:d});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[d,v]));Object(u.useEffect)((function(){if(n&&y&&v){var t=new s("wss://datagame.live/ws/"+n,R.run),e=t.addListener((function(t){"message"===t.type?I([t.data]):"getMessages"===t.type&&I(t.data)}));return t.connect(),function(){t.disconnect(),t.removeListener(e),F((function(e){return e===t?void 0:e})),P([])}}}),[n,y,v]),Object(u.useEffect)((function(){D&&D.setConnector(R.run)}),[R.run,D]);return Object(u.useEffect)((function(){if(D){var t=D.addListener((function(t){"error"===t.type&&"string"==typeof t.message&&(t.message.startsWith("Unauthenticated")?D.connect():t.message.startsWith("Invalid conversation id")&&Object(p.navigate)("/chat"))}));return function(){D&&D.removeListener(t)}}}),[D]),Object(u.useEffect)((function(){if(D){var t=D.addListener((function(t){if("setNickname"===t.type){var e=t.data,n=e.userId,r=e.nickname;n===y.id&&k(r),S((function(t){var e;return Object.assign({},t,((e={})[n]=Object.assign({},t[n],{nickname:r}),e))})),P((function(t){return t.map((function(t){var e=Object.assign({},t);return e.sender.userId===n&&(e.sender.nickname=r),e}))}))}}));return function(){D&&D.removeListener(t)}}}),[D]),c.a.createElement(h.Provider,{value:{roomId:n,roomTitle:b,roomUsers:E,nickname:x,isLoading:R.loading,isConnected:null!=D,isFirstLogin:C,setFirstLogin:L,sendMessage:function(t){D&&D.send(t)},messages:T}},e)}},A0UG:function(t,e,n){"use strict";n.d(e,"a",(function(){return Y})),n.d(e,"b",(function(){return W}));var r=n("1OyB"),a=n("vuIU");function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var c=n("JX7q");function s(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?Object(c.a)(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=n("q1tI"),p=n.n(f);function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n("17x9");var d,m,v=0,y=0,g=0,b=0,w=0,O=0,x="object"==typeof performance&&performance.now?performance:Date,k="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function j(){return w||(k(E),w=x.now()+O)}function E(){w=0}function S(){this._call=this._time=this._next=null}function N(t,e,n){var r=new S;return r.restart(t,e,n),r}function C(){w=(b=x.now())+O,v=y=0;try{!function(){j(),++v;for(var t,e=d;e;)(t=w-e._time)>=0&&e._call.call(null,t),e=e._next;--v}()}finally{v=0,function(){var t,e,n=d,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:d=e);m=t,_(r)}(),w=0}}function L(){var t=x.now(),e=t-b;e>1e3&&(O-=e,b=t)}function _(t){v||(y&&(y=clearTimeout(y)),t-w>24?(t<1/0&&(y=setTimeout(C,t-x.now()-O)),g&&(g=clearInterval(g))):(g||(b=x.now(),g=setInterval(L,1e3)),v=1,k(C)))}S.prototype=N.prototype={constructor:S,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?j():+n)+(null==e?0:+e),this._next||m===this||(m?m._next=this:d=this,m=this),this._call=t,this._time=n,_()},stop:function(){this._call&&(this._call=null,this._time=1/0,_())}};var T=function(t,e,n){var r=new S;return e=null==e?0:+e,r.restart((function(n){r.stop(),t(n+e)}),e,n),r};function P(t){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var I=0;function A(t,e){for(var n in e)t[n]=e[n]}var D={delay:0,duration:250,ease:function(t){return+t}};var F=function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.start=null,this.interrupt=null,this.end=null,e.events&&Object.keys(e.events).forEach((function(t){if("function"!=typeof e.events[t])throw new Error("Event handlers must be a function");var r,a;n[t]=(r=e.events[t],a=!1,function(){a||(a=!0,r.call(this))})}))};function R(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){U(t,e,n[e])}))}return t}function U(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function K(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var G=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.state=e||{}}var e,n,r;return e=t,(n=[{key:"transition",value:function(t){if(Array.isArray(t)){var e=!0,n=!1,r=void 0;try{for(var a,o=t[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var i=a.value;this.parse(i)}}catch(u){n=!0,r=u}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}else this.parse(t)}},{key:"isTransitioning",value:function(){return!!this.transitionData}},{key:"stopTransitions",value:function(){var t=this.transitionData;t&&Object.keys(t).forEach((function(e){t[e].timer.stop()}))}},{key:"setState",value:function(t){A(this.state,"function"==typeof t?t(this.state):t)}},{key:"parse",value:function(t){var e=this,n=R({},t),r=new F(n);n.events&&delete n.events;var a=R({},D,n.timing||{},{time:j()});n.timing&&delete n.timing,Object.keys(n).forEach((function(t){var o,i,u=[],c=n[t];if("object"===P(i=c)&&!1===Array.isArray(i))Object.keys(c).forEach((function(n){var r=c[n];Array.isArray(r)?1===r.length?u.push(e.getTween(n,r[0],t)):(e.setState((function(e){var a,o;return(o={})[t]=R({},e[t],((a={})[n]=r[0],a)),o})),u.push(e.getTween(n,r[1],t))):"function"==typeof r?u.push((function(){return function(a){e.setState((function(e){var o,i;return(i={})[t]=R({},e[t],((o={})[n]=r(a),o)),i}))}})):(e.setState((function(e){var a,o;return(o={})[t]=R({},e[t],((a={})[n]=r,a)),o})),u.push(e.getTween(n,r,t)))}));else if(Array.isArray(c))1===c.length?u.push(e.getTween(t,c[0],null)):(e.setState(((o={})[t]=c[0],o)),u.push(e.getTween(t,c[1],null)));else if("function"==typeof c)u.push((function(){return function(n){var r;e.setState(((r={})[t]=c(n),r))}}));else{var s;e.setState(((s={})[t]=c,s)),u.push(e.getTween(t,c,null))}e.update({stateKey:t,timing:a,tweens:u,events:r,status:0})}))}},{key:"getTween",value:function(t,e,n){var r=this;return function(){var a=n?r.state[n][t]:r.state[t];if(a===e)return null;var o=r.getInterpolator(a,e,t,n);return null===n?function(e){var n;r.setState(((n={})[t]=o(e),n))}:function(e){r.setState((function(r){var a,i;return(i={})[n]=R({},r[n],((a={})[t]=o(e),a)),i}))}}}},{key:"update",value:function(t){this.transitionData||(this.transitionData={}),this.init(++I,t)}},{key:"init",value:function(t,e){var n=this,r=e.tweens.length,a=new Array(r);this.transitionData[t]=e,e.timer=N((function(t){e.status=1,e.timer.restart(o,e.timing.delay,e.timing.time),e.timing.delay<=t&&o(t-e.timing.delay)}),0,e.timing.time);var o=function o(c){if(1!==e.status)return u();for(var s in n.transitionData){var l=n.transitionData[s];if(l.stateKey===e.stateKey){if(3===l.status)return T(o);4===l.status?(l.status=6,l.timer.stop(),l.events.interrupt&&l.events.interrupt.call(n),delete n.transitionData[s]):+s<t&&(l.status=6,l.timer.stop(),delete n.transitionData[s])}}if(T((function(){3===e.status&&(e.status=4,e.timer.restart(i,e.timing.delay,e.timing.time),i(c))})),e.status=2,e.events.start&&e.events.start.call(n),2===e.status){e.status=3;for(var f=-1,p=0;p<r;++p){var h=e.tweens[p]();h&&(a[++f]=h)}a.length=f+1}},i=function(t){var r=1;t<e.timing.duration?r=e.timing.ease(t/e.timing.duration):(e.timer.restart(u),e.status=5);for(var o=-1;++o<a.length;)a[o](r);5===e.status&&(e.events.end&&e.events.end.call(n),u())},u=function(){for(var r in e.status=6,e.timer.stop(),delete n.transitionData[t],n.transitionData)return;delete n.transitionData}}}])&&K(e.prototype,n),r&&K(e,r),t}();var M=function(t,e,n,r){for(var a=[],o=0;o<n.length;o++)a[o]=n[o];for(var i=0;i<t.length;i++)void 0===r[t[i]]&&a.push(t[i]);return a.sort((function(t,a){var o=r[t],i=r[a],u=e[t],c=e[a];if(null!=o&&null!=i)return r[t]-r[a];if(null!=u&&null!=c)return e[t]-e[a];if(null!=o){for(var s=0;s<n.length;s++){var l=n[s];if(e[l]){if(o<r[l]&&c>e[l])return-1;if(o>r[l]&&c<e[l])return 1}}return 1}for(var f=0;f<n.length;f++){var p=n[f];if(e[p]){if(i<r[p]&&u>e[p])return 1;if(i>r[p]&&u<e[p])return-1}}return-1}))};function q(t,e){var n=+t,r=+e-n;return function(t){return n+r*t}}function H(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=l(t);if(e){var a=l(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return s(this,n)}}var J=function(t){i(n,t);var e=H(n);function n(t){var a;Object(r.a)(this,n),a=e.call(this,t),h(Object(c.a)(a),"animate",(function(){var t=a.state,e=t.nodeKeys,n=t.nodeHash;if(!a.unmounting){for(var r=!1,o=[],i=e.length,u=0;u<i;u++){var c=e[u],s=n[c],l=s.isTransitioning();l&&(r=!0),"LEAVE"!==s.type||l?o.push(c):delete n[c]}r||a.interval.stop(),a.setState((function(){return{nodeKeys:o,nodes:o.map((function(t){return n[t]}))}}))}})),h(Object(c.a)(a),"interval",null),h(Object(c.a)(a),"unmounting",!1);var o=t.interpolation,u=function(t){i(n,t);var e=H(n);function n(t,a){var i;return Object(r.a)(this,n),i=e.call(this),h(Object(c.a)(i),"getInterpolator",o),i.key=t,i.data=a,i.type="ENTER",i}return n}(G);return a.state={Node:u,nodeKeys:[],nodeHash:{},nodes:[],data:null},a}return Object(a.a)(n,[{key:"componentDidMount",value:function(){this.startInterval()}},{key:"componentDidUpdate",value:function(t){t.data===this.props.data||this.unmounting||this.startInterval()}},{key:"startInterval",value:function(){var t,e,n,r,a;this.interval?this.interval.restart(this.animate):this.interval=(t=this.animate,r=new S,a=e,null==e?(r.restart(t,e,n),r):(e=+e,n=null==n?j():+n,r.restart((function o(i){i+=a,r.restart(o,a+=e,n),t(i)}),e,n),r))}},{key:"componentWillUnmount",value:function(){var t=this.state,e=t.nodeKeys,n=t.nodeHash;this.unmounting=!0,this.interval&&this.interval.stop(),e.forEach((function(t){n[t].stopTransitions()}))}},{key:"render",value:function(){var t=this.props.children(this.state.nodes);return t&&p.a.Children.only(t)}}],[{key:"getDerivedStateFromProps",value:function(t,e){if(t.data!==e.data){for(var n=t.data,r=t.keyAccessor,a=t.start,o=t.enter,i=t.update,u=t.leave,c=e.Node,s=e.nodeKeys,l=e.nodeHash,f={},p=0;p<s.length;p++)f[s[p]]=p;for(var h={},d=[],m=0;m<n.length;m++){var v=n[m],y=r(v,m);if(h[y]=m,d.push(y),void 0===f[y]){var g=new c;g.key=y,g.data=v,g.type="ENTER",l[y]=g}}for(var b=0;b<s.length;b++){var w=s[b],O=l[w];void 0!==h[w]?(O.data=n[h[w]],O.type="UPDATE"):O.type="LEAVE"}for(var x=M(s,f,d,h),k=0;k<x.length;k++){var j=x[k],E=l[j],S=E.data;"ENTER"===E.type?(E.setState(a(S,h[j])),E.transition(o(S,h[j]))):"LEAVE"===E.type?E.transition(u(S,f[j])):E.transition(i(S,h[j]))}return{data:n,nodes:x.map((function(t){return l[t]})),nodeHash:l,nodeKeys:x}}return null}}]),n}(f.Component);J.propTypes={},J.defaultProps={enter:function(){},update:function(){},leave:function(){},interpolation:q};var W=J;function z(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=l(t);if(e){var a=l(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return s(this,n)}}var Q=function(){return"$$key$$"},X=function(t){i(n,t);var e=z(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var t=this.props,e=t.show,n=t.start,r=t.enter,a=t.update,o=t.leave,i=t.interpolation,u=t.children,c="function"==typeof n?n():n;return p.a.createElement(W,{data:e?[c]:[],start:function(){return c},keyAccessor:Q,interpolation:i,enter:"function"==typeof r?r:function(){return r},update:"function"==typeof a?a:function(){return a},leave:"function"==typeof o?o:function(){return o}},(function(t){if(!t[0])return null;var e=u(t[0].state);return e&&p.a.Children.only(e)}))}}]),n}(f.Component);X.defaultProps={show:!0,interpolation:q};var Y=X},G5e0:function(t,e,n){"use strict";var r=n("q1tI"),a=n.n(r);function o(){return(o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function i(t,e){if(null==t)return{};var n,r,a=function(t,e){if(null==t)return{};var n,r,a={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}var u=Object(r.forwardRef)((function(t,e){var n=t.color,r=void 0===n?"currentColor":n,u=t.size,c=void 0===u?24:u,s=i(t,["color","size"]);return a.a.createElement("svg",o({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},s),a.a.createElement("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),a.a.createElement("polyline",{points:"12 19 5 12 12 5"}))}));u.displayName="ArrowLeft",e.a=u},"HaE+":function(t,e,n){"use strict";function r(t,e,n,r,a,o,i){try{var u=t[o](i),c=u.value}catch(s){return void n(s)}u.done?e(c):Promise.resolve(c).then(r,a)}function a(t){return function(){var e=this,n=arguments;return new Promise((function(a,o){var i=t.apply(e,n);function u(t){r(i,a,o,u,c,"next",t)}function c(t){r(i,a,o,u,c,"throw",t)}u(void 0)}))}}n.d(e,"a",(function(){return a}))},K9Fk:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("o0o1"),a=n.n(r),o=(n("ls82"),n("HaE+")),i=n("q1tI"),u=function(t){var e=Object(i.useState)(!1),n=e[0],r=e[1],u=Object(i.useState)(),c=u[0],s=u[1];return{error:c,loading:n,run:function(){var e=Object(o.a)(a.a.mark((function e(){var n=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!0),s(void 0),e.prev=2,e.next=5,t.apply(void 0,n);case 5:return e.abrupt("return",e.sent);case 8:e.prev=8,e.t0=e.catch(2),s(e.t0);case 11:return e.prev=11,r(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[2,8,11,14]])})));return function(){return e.apply(this,arguments)}}()}}},"YN+Z":function(t,e,n){"use strict";n.d(e,"c",(function(){return p})),n.d(e,"b",(function(){return h})),n.d(e,"a",(function(){return d}));var r=n("o0o1"),a=n.n(r),o=(n("ls82"),n("HaE+")),i=n("q1tI"),u=n.n(i),c=n("bPrE"),s=n("t0Xt"),l=n("xlhA"),f=n("K9Fk");function p(t){var e=t.onCancel,n=t.onSuccess,r=t.allowGuest,c=void 0===r||r,l=Object(i.useContext)(s.a),p=l.createGuest,h=l.register,d=Object(i.useState)(c),m=d[0],v=d[1],y=Object(i.useState)(""),g=y[0],b=y[1],w=Object(i.useState)(""),O=w[0],x=w[1],k=Object(i.useState)(),j=k[0],E=k[1],S=Object(f.a)(Object(o.a)(a.a.mark((function t(){var e;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!m){t.next=6;break}return t.next=3,p();case 3:e=t.sent,t.next=9;break;case 6:return t.next=8,h(g,O);case 8:e=t.sent;case 9:e.success&&n?n():E(e.message||"Unknown error");case 10:case"end":return t.stop()}}),t)}))));return u.a.createElement("form",{className:"pt-1",onSubmit:function(t){if(t.preventDefault(),!m){if(g.length<2||g.length>63)return void E("Username must be 2-63 characters");if(/[^A-Za-z0-9-_.]/.test(g))return void E("Username can not contain special characters");if(O.length<8)return void E("Password must be at least 8 characters long")}S.loading||S.run()}},c&&u.a.createElement(u.a.Fragment,null,u.a.createElement("input",{className:"mr-2 mb-3",type:"checkbox",name:"isGuest",checked:m,onChange:function(t){return v(t.currentTarget.checked)}}),u.a.createElement("label",{className:"inline-block text-sm text-pen-light",htmlFor:"username"},"Use guest account?")),!m&&u.a.createElement(u.a.Fragment,null,u.a.createElement("label",{className:"block text-sm text-pen-light",htmlFor:"username"},"Username"),u.a.createElement("input",{name:"username",type:"text",autoComplete:"off",className:"bg-paper-dark rounded p-2 my-1 outline-none",value:g,onChange:function(t){E(void 0),b(t.currentTarget.value)}}),u.a.createElement("label",{className:"block text-sm text-pen-light",htmlFor:"password"},"Password"),u.a.createElement("input",{name:"password",type:"password",autoComplete:"off",className:"bg-paper-dark rounded p-2 my-1 outline-none",value:O,onChange:function(t){E(void 0),x(t.currentTarget.value)}})),u.a.createElement("div",{className:"flex justify-end mt-3 -mx-1"},e&&u.a.createElement("button",{type:"button",onClick:e,className:"bg-gray-400 hover:bg-gray-500 text-black py-1 px-3 m-1 rounded"},"Cancel"),u.a.createElement("button",{type:"submit",className:"bg-green-500 hover:bg-green-600 text-white py-1 px-3 m-1 rounded"},"Register")),j&&u.a.createElement("p",{className:"mt-2 mb-0 text-danger"},j))}function h(t){var e=t.onCancel,n=t.onSuccess,r=Object(i.useContext)(s.a).login,c=Object(i.useState)(""),l=c[0],p=c[1],h=Object(i.useState)(""),d=h[0],m=h[1],v=Object(i.useState)(),y=v[0],g=v[1],b=Object(f.a)(Object(o.a)(a.a.mark((function t(){var e;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r(l,d);case 2:(e=t.sent).success&&n?n():g(e.message||"Unknown error");case 4:case"end":return t.stop()}}),t)}))));return u.a.createElement("form",{className:"pt-1",onSubmit:function(t){t.preventDefault(),b.loading||b.run()}},u.a.createElement("label",{className:"block text-sm text-pen-light",htmlFor:"username"},"Username"),u.a.createElement("input",{name:"username",type:"text",autoComplete:"off",className:"bg-paper-dark rounded p-2 my-1 outline-none",value:l,onChange:function(t){g(void 0),p(t.currentTarget.value)}}),u.a.createElement("label",{className:"block text-sm text-pen-light",htmlFor:"password"},"Password"),u.a.createElement("input",{name:"password",type:"password",autoComplete:"off",className:"bg-paper-dark rounded p-2 my-1 outline-none",value:d,onChange:function(t){g(void 0),m(t.currentTarget.value)}}),u.a.createElement("div",{className:"flex justify-end mt-3 -mx-1"},e&&u.a.createElement("button",{type:"button",onClick:e,className:"bg-gray-400 hover:bg-gray-500 text-black py-1 px-3 m-1 rounded"},"Cancel"),u.a.createElement("button",{type:"submit",className:"bg-green-500 hover:bg-green-600 text-white py-1 px-3 m-1 rounded"},"Log in")),y&&u.a.createElement("p",{className:"mt-2 mb-0 text-danger"},y))}function d(t){var e=t.showModal,n=t.closeModal,r=t.defaultTab,a=Object(i.useState)(r),o=a[0],s=a[1];return Object(i.useEffect)((function(){e&&s(r)}),[e]),u.a.createElement(c.a,{showModal:e,closeModal:n},u.a.createElement(l.a,{className:"mb-3",itemClassName:"hover:bg-paper-dark",activeTab:o,setActiveTab:s,items:["Register","Log in"]},0===o&&u.a.createElement(p,{onCancel:n,onSuccess:n}),1===o&&u.a.createElement(h,{onCancel:n,onSuccess:n})))}},YuTi:function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},bPrE:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("q1tI"),a=n.n(r),o=n("A0UG");function i(t){var e=t.showModal,n=t.closeModal,i=t.children,u=Object(r.useRef)(null);return a.a.createElement(o.a,{show:e,start:function(){return{opacity:0,dy:-100}},enter:function(){return{opacity:[1],dy:[0]}},leave:function(){return[{opacity:[0]},{dy:[-200],timing:{delay:100}}]}},(function(t){var e=t.opacity,r=t.dy;return a.a.createElement("div",{className:"fixed top-0 left-0 h-full w-full overflow-hidden outline-none",style:{transition:"opacity .1s linear",background:"rgba(0, 0, 0, 0.35)",opacity:e},onClick:function(t){u.current&&!u.current.contains(t.target)&&n()}},a.a.createElement("div",{className:"my-5 px-5 mx-auto max-w-md flex flex-col justify-center items-center h-full"},a.a.createElement("div",{className:"bg-paper-darker rounded card modal-dialog p-4",style:{minWidth:"calc(min(100%, 20rem))",transition:"transform .1s ease-out",transform:"translate(0, "+r+"px)"},ref:u},i)))}))}},kd2E:function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,o){e=e||"&",n=n||"=";var i={};if("string"!=typeof t||0===t.length)return i;var u=/\+/g;t=t.split(e);var c=1e3;o&&"number"==typeof o.maxKeys&&(c=o.maxKeys);var s=t.length;c>0&&s>c&&(s=c);for(var l=0;l<s;++l){var f,p,h,d,m=t[l].replace(u,"%20"),v=m.indexOf(n);v>=0?(f=m.substr(0,v),p=m.substr(v+1)):(f=m,p=""),h=decodeURIComponent(f),d=decodeURIComponent(p),r(i,h)?a(i[h])?i[h].push(d):i[h]=[i[h],d]:i[h]=d}return i};var a=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},ls82:function(t,e,n){var r=function(t){"use strict";var e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(S){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var a=e&&e.prototype instanceof f?e:f,o=Object.create(a.prototype),i=new k(r||[]);return o._invoke=function(t,e,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return E()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var u=w(i,n);if(u){if(u===l)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=s(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(t,n,i),o}function s(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(S){return{type:"throw",arg:S}}}t.wrap=c;var l={};function f(){}function p(){}function h(){}var d={};d[a]=function(){return this};var m=Object.getPrototypeOf,v=m&&m(m(j([])));v&&v!==e&&n.call(v,a)&&(d=v);var y=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var r;this._invoke=function(a,o){function i(){return new e((function(r,i){!function r(a,o,i,u){var c=s(t[a],t,o);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==typeof f&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,i,u)}),(function(t){r("throw",t,i,u)})):e.resolve(f).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,u)}))}u(c.arg)}(a,o,r,i)}))}return r=r?r.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=s(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var a=r.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return p.prototype=y.constructor=h,h.constructor=p,p.displayName=u(h,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,u(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(b.prototype),b.prototype[o]=function(){return this},t.AsyncIterator=b,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new b(c(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},g(y),u(y,i,"Generator"),y[a]=function(){return this},y.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=j,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return i.type="throw",i.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var u=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),x(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;x(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:j(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}(t.exports);try{regeneratorRuntime=r}catch(a){Function("r","regeneratorRuntime = r")(r)}},o0o1:function(t,e,n){t.exports=n("ls82")},rxcZ:function(t,e,n){"use strict";var r=n("q1tI"),a=n.n(r),o=function(t){var e=t.children,n=t.className;return a.a.createElement("section",{className:n},a.a.createElement("div",{className:"container mx-auto"},e))};o.defaultProps={className:"px-5 mt-10"},e.a=o},s4NR:function(t,e,n){"use strict";e.decode=e.parse=n("kd2E"),e.encode=e.stringify=n("4JlD")},t0Xt:function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return l}));var r=n("o0o1"),a=n.n(r),o=(n("ls82"),n("HaE+")),i=n("q1tI"),u=n.n(i),c=function(){function t(t,e,n){void 0===e&&(e={}),void 0===n&&(n=[]),this.baseUrl=t,this.headers=e,this.responseCallbacks=n}var e=t.prototype;return e._fetch=function(t,e){var n=Object.assign({},e,{headers:Object.assign({},e.headers,{Accept:"application/json"})}),r=fetch(""+this.baseUrl+t,n).then((function(t){return t.json()}),(function(t){return{message:"Network error",success:!1}}));return this.responseCallbacks.reduce((function(t,e){return t.then(e)}),r)},e.get=function(t,e){return void 0===e&&(e={}),this._fetch(t,{method:"GET",headers:Object.assign({},this.headers,e),referrerPolicy:"no-referrer"})},e.post=function(t,e,n){return void 0===n&&(n={}),this._fetch(t,{method:"POST",headers:Object.assign({"Content-Type":"application/json"},this.headers,n),referrerPolicy:"no-referrer",body:JSON.stringify(e)})},e.postForm=function(t,e,n){return void 0===n&&(n={}),this._fetch(t,{method:"POST",headers:Object.assign({},this.headers,n),referrerPolicy:"no-referrer",body:e})},e.del=function(t,e,n){return void 0===n&&(n={}),this._fetch(t,{method:"DELETE",headers:Object.assign({},this.headers,n),referrerPolicy:"no-referrer",body:JSON.stringify(e)})},t}(),s=u.a.createContext({token:null,authHttp:null,user:null,userLoading:!1,createGuest:function(){},register:function(){},login:function(){},logout:function(){}});function l(t){var e=Object(i.useState)((function(){return function(t,e){if("undefined"==typeof window)return e;try{var n=localStorage.getItem(t);return null!==n?n:e}catch(r){}return e}("chat/auth_token",null)})),n=e[0],r=e[1],l=Object(i.useState)(null),f=l[0],p=l[1],h=Object(i.useCallback)((function(){r(null),p(null)}),[]),d=Object(i.useCallback)((function(t){return!t.success&&/^Unauthenticated/.test(t.message)&&h(),t}),[h]),m=Object(i.useState)((function(){return new c("https://datagame.live")}))[0],v=Object(i.useMemo)((function(){return n?new c("https://datagame.live",{"X-Access-Token":n},[d]):null}),[d,n]);Object(i.useEffect)((function(){n&&!f&&v.get("/me").then(d).then((function(t){t.success&&p({id:t.userId,username:t.username})}))}),[v,d,n,f]);var y=function(){var t=Object(o.a)(a.a.mark((function t(e){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.post("/u",e);case 2:return(n=t.sent).success&&(localStorage.setItem("chat/auth_token",n.token),r(n.token),p({id:n.userId,username:n.username})),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),g=function(){var t=Object(o.a)(a.a.mark((function t(e,n){var o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.post("/login",{username:e,password:n});case 2:return(o=t.sent).success&&(localStorage.setItem("chat/auth_token",o.token),r(o.token),p({id:o.userId,username:o.username})),t.abrupt("return",o);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return u.a.createElement(s.Provider,{value:{token:n,authHttp:v,user:f,userLoading:n&&!f,createGuest:function(){return y({isGuest:!0})},register:function(t,e){return y({username:t,password:e})},login:g,logout:function(){"undefined"!=typeof window&&localStorage.removeItem("chat/auth_token"),h()}}},t.children)}},uevz:function(t,e,n){"use strict";var r=n("q1tI"),a=n.n(r);e.a=function(t){var e=t.rows,n=t.columns,r=t.handleSelect,o=t.handleOpen,i=t.keyField,u=t.noDataText;return 0===e.length?a.a.createElement("p",{className:"mt-2"},u||""):a.a.createElement("table",{className:"w-full mt-2"},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{style:{width:1}}),n.map((function(t){var e;return a.a.createElement("th",{key:t.field,className:"px-2 py-1 "+t.class||!1},null!==(e=t.label)&&void 0!==e?e:t.field)})))),a.a.createElement("tbody",null,e.map((function(t){return a.a.createElement("tr",{key:t[i],className:"hover:bg-paper-darker cursor-pointer",onClick:function(e){return o(t)}},a.a.createElement("td",{className:"px-2 pt-1"},a.a.createElement("input",{type:"checkbox",onClick:function(t){return t.stopPropagation()},onChange:function(e){return r(t,e.target.checked)}})),n.map((function(e){return a.a.createElement("td",{key:e.field,className:"px-2 py-1 "+e.class||!1},e.render?e.render(t[e.field],t):t[e.field])})))}))))}},vuIU:function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}n.d(e,"a",(function(){return a}))},xlhA:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("q1tI"),a=n.n(r);function o(t){var e=t.activeTab,n=t.setActiveTab,r=t.className,o=t.items,i=t.itemClassName,u=t.children;return a.a.createElement("div",null,a.a.createElement("ul",{className:"flex -mx-1"+(r?" "+r:"")},o.map((function(t,r){return a.a.createElement("li",{className:"mx-1 flex-1",key:r},a.a.createElement("button",{className:"inline-block w-full text-center border-accent-200 py-1 px-3 rounded-t"+(i?" "+i:" hover:bg-paper-darker")+(e===r?" border-b":""),onClick:function(){return n(r)}},t))}))),u)}}}]);
//# sourceMappingURL=dbe438349927fff5c5e302cf7c4bec3429112c38-55f6dc835df1a8e8e731.js.map